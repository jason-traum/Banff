<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèîÔ∏è JT + MP go to Banff</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Application Structure Plan: 
        Overall: Single-page application with a fixed top navigation bar. Content for each section dynamically shown.
        Sections:
        1. Home: Welcome, trip overview.
        2. Daily Plan: Collapsible cards for each day's schedule. Interactive to show/hide details. Brief inline summaries for activities. Includes a flexible rainy day option.
        3. Activities Hub: Filterable categories (Hikes, Dining, Other). Hikes in a sortable table with inline summaries. Dining/Other activities are cards with inline summaries. Facilitates choice based on preferences.
        4. Bookings Checklist: Structured list of critical booking items and deadlines. Centralizes time-sensitive actions.
        5. Travel Essentials: Collapsible sections for packing, weather, safety. Organizes dense text.
        Why this structure?: Thematic organization for easier digestion than chronological scroll. User-centric navigation based on needs. Inline summaries improve scannability and remove modal complexity.
    -->
    <!-- Visualization & Content Choices: 
        Daily Plan: Accordion list of days (HTML/Tailwind/JS). Icons for activity types (Unicode/CSS). Click to expand/collapse. Inline summaries for activities.
        Activities (Hikes): Filterable and sortable table (HTML/Tailwind/JS). Emojis for tags. Inline summaries.
        Activities (Dining/Other): Filterable cards (HTML/Tailwind/JS) with inline summaries.
        Bookings: Structured list/cards (HTML/Tailwind).
        Essentials: Accordions for text (HTML/Tailwind/JS).
        Graphics: Unicode characters for icons, Tailwind for styling.
        Confirmation: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link { transition: all 0.3s ease; }
        .nav-link.active { color: #f59e0b; border-bottom-color: #f59e0b; } /* amber-500 */
        .section-title { border-bottom: 2px solid #0d9488; padding-bottom: 0.5rem; } /* teal-600 */
        .card { background-color: white; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column; justify-content: space-between; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .accordion-button.open span:last-child { transform: rotate(180deg); }
        .filter-button.active { background-color: #0d9488; color: white; } /* teal-600 */
        .tab-button.active { background-color: #14b8a6; color: white; } /* teal-500 */
        [x-cloak] { display: none !important; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        th { cursor: pointer; }
        th .sort-arrow { display: inline-block; margin-left: 5px; opacity: 0.5; }
        th .sort-arrow.active { opacity: 1; }
        .tag-emoji { font-size: 1.1em; margin-right: 0.25rem; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-slate-50 text-slate-800" x-data="appData()">
    <header class="bg-teal-700 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-2xl font-bold">üèîÔ∏è JT and MP go to Banff</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button @click="activeSection = 'home'" :class="{ 'active': activeSection === 'home' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-600 border-b-2 border-transparent">Home</button>
                        <button @click="activeSection = 'dailyPlan'" :class="{ 'active': activeSection === 'dailyPlan' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-600 border-b-2 border-transparent">Daily Plan</button>
                        <button @click="activeSection = 'activities'" :class="{ 'active': activeSection === 'activities' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-600 border-b-2 border-transparent">Activities</button>
                        <button @click="activeSection = 'bookings'" :class="{ 'active': activeSection === 'bookings' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-600 border-b-2 border-transparent">Bookings</button>
                        <button @click="activeSection = 'essentials'" :class="{ 'active': activeSection === 'essentials' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-600 border-b-2 border-transparent">Essentials</button>
                    </div>
                </div>
                <div class="md:hidden">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" class="inline-flex items-center justify-center p-2 rounded-md text-teal-200 hover:text-white hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" :class="{'hidden': mobileMenuOpen, 'block': !mobileMenuOpen }" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg class="h-6 w-6" :class="{'hidden': !mobileMenuOpen, 'block': mobileMenuOpen }" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            <div x-show="mobileMenuOpen" x-cloak class="md:hidden py-2" @click.away="mobileMenuOpen = false">
                <button @click="activeSection = 'home'; mobileMenuOpen = false" class="block w-full text-left nav-link px-3 py-2 rounded-md text-base font-medium hover:bg-teal-600">Home</button>
                <button @click="activeSection = 'dailyPlan'; mobileMenuOpen = false" class="block w-full text-left nav-link mt-1 px-3 py-2 rounded-md text-base font-medium hover:bg-teal-600">Daily Plan</button>
                <button @click="activeSection = 'activities'; mobileMenuOpen = false" class="block w-full text-left nav-link mt-1 px-3 py-2 rounded-md text-base font-medium hover:bg-teal-600">Activities</button>
                <button @click="activeSection = 'bookings'; mobileMenuOpen = false" class="block w-full text-left nav-link mt-1 px-3 py-2 rounded-md text-base font-medium hover:bg-teal-600">Bookings</button>
                <button @click="activeSection = 'essentials'; mobileMenuOpen = false" class="block w-full text-left nav-link mt-1 px-3 py-2 rounded-md text-base font-medium hover:bg-teal-600">Essentials</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <section x-show="activeSection === 'home'" x-transition>
            <div class="bg-stone-100 p-6 sm:p-8 rounded-lg shadow-lg text-center">
                <h2 class="text-3xl sm:text-4xl font-bold text-teal-700 mb-4">üèîÔ∏è JT and MP go to Banff!</h2>
                <p class="text-lg text-slate-700 mb-2">September 11th - 16th, 2025</p>
                <p class="text-md text-slate-600 mb-6">This interactive planner is your guide to an unforgettable 4-day journey through the heart of the Canadian Rockies. Explore daily plans, discover exciting activities, manage your bookings, and find essential travel tips all in one place.</p>
                <img src="https://images.pexels.com/photos/206359/pexels-photo-206359.jpeg?auto=compress&cs=tinysrgb&w=800&h=400&dpr=1" alt="Majestic Banff View - Moraine Lake" class="rounded-md shadow-md mx-auto object-cover h-[200px] sm:h-[300px] md:h-[400px] w-full max-w-3xl" onerror="this.onerror=null;this.src='https://placehold.co/800x400/cccccc/ffffff?text=Image+Not+Available';">
            </div>
        </section>

        <section x-show="activeSection === 'dailyPlan'" x-transition>
            <h2 class="text-2xl sm:text-3xl font-bold text-teal-700 mb-6 section-title">Daily Itinerary</h2>
            <p class="mb-6 text-slate-600">Discover your day-by-day schedule for this breathtaking trip. Click on a day to see the detailed plan, including activities, dining suggestions, and transportation notes. Remember that your arrival on Thursday and departure on Tuesday are primarily travel days, with the main activities concentrated from Friday to Monday. A "Rainy Day" option is also included for flexibility.</p>
            <div class="space-y-4">
                <template x-for="(day, index) in dailyPlan" :key="index">
                    <div class="card">
                        <button @click="toggleAccordion(index, 'dailyPlan')" class="accordion-button w-full flex justify-between items-center p-4 sm:p-5 text-left text-lg font-semibold text-teal-700 hover:bg-slate-100 rounded-t-md">
                            <span x-text="day.title"></span>
                            <span class="transform transition-transform duration-300" :class="{'rotate-180': openAccordions.dailyPlan === index}">‚ñº</span>
                        </button>
                        <div x-show="openAccordions.dailyPlan === index" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform -translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform translate-y-0" x-transition:leave-end="opacity-0 transform -translate-y-2" class="p-4 sm:p-5 border-t border-slate-200">
                            <p class="text-sm text-slate-500 mb-3 italic" x-text="day.focus"></p>
                            <template x-if="day.shuttleStrategy">
                                <p class="text-sm text-amber-700 bg-amber-100 p-2 rounded-md mb-3"><strong class="font-semibold">Shuttle Strategy:</strong> <span x-text="day.shuttleStrategy"></span></p>
                            </template>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-slate-200">
                                    <thead class="bg-slate-50">
                                        <tr>
                                            <th class="px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Time</th>
                                            <th class="px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Activity</th>
                                            <th class="px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Details/Options</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-slate-200">
                                        <template x-for="(item, itemIndex) in day.schedule" :key="itemIndex">
                                            <tr>
                                                <td class="px-3 py-3 whitespace-nowrap text-sm font-medium text-slate-900" x-text="item.time"></td>
                                                <td class="px-3 py-3 text-sm text-slate-600" x-html="item.activityDisplay || item.activity"></td>
                                                <td class="px-3 py-3 text-sm text-slate-600" x-html="item.details"></td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </section>

        <section x-show="activeSection === 'activities'" x-transition>
            <h2 class="text-2xl sm:text-3xl font-bold text-teal-700 mb-6 section-title">Activities Hub</h2>
            <p class="mb-6 text-slate-600">Explore the various activities available during your trip. Use the filters to find hikes based on difficulty, discover dining options, or learn more about other exciting experiences like canoeing or scenic drives.</p>
            <div class="mb-6 flex flex-wrap gap-2">
                <button @click="activeActivityTab = 'hikes'" :class="{'active': activeActivityTab === 'hikes'}" class="tab-button px-4 py-2 text-sm font-medium rounded-md bg-teal-50 hover:bg-teal-100 text-teal-700">üèûÔ∏è Hikes</button>
                <button @click="activeActivityTab = 'dining'" :class="{'active': activeActivityTab === 'dining'}" class="tab-button px-4 py-2 text-sm font-medium rounded-md bg-teal-50 hover:bg-teal-100 text-teal-700">üçΩÔ∏è Dining</button>
                <button @click="activeActivityTab = 'other'" :class="{'active': activeActivityTab === 'other'}" class="tab-button px-4 py-2 text-sm font-medium rounded-md bg-teal-50 hover:bg-teal-100 text-teal-700">üõ∂ Other Activities</button>
            </div>

            <div x-show="activeActivityTab === 'hikes'">
                <div class="mb-4 flex flex-wrap gap-x-4 gap-y-2 items-center">
                    <div>
                        <label for="hikeDifficultyFilter" class="text-sm font-medium text-slate-700">Filter by Difficulty:</label>
                        <select id="hikeDifficultyFilter" x-model="hikeFilters.difficulty" @change="applyHikeFiltersAndSort()" class="mt-1 block w-full sm:w-auto px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm">
                            <option value="all">All Difficulties</option>
                            <option value="Easy">Easy</option>
                            <option value="Easy-Moderate">Easy-Moderate</option>
                            <option value="Moderate">Moderate</option>
                            <option value="Moderate-Hard">Moderate-Hard</option>
                            <option value="Hard">Hard</option>
                            <option value="Difficult">Difficult</option>
                        </select>
                    </div>
                    <div>
                        <label for="hikeTagFilter" class="text-sm font-medium text-slate-700">Filter by Tag:</label>
                        <select id="hikeTagFilter" x-model="hikeFilters.tag" @change="applyHikeFiltersAndSort()" class="mt-1 block w-full sm:w-auto px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm">
                            <option value="all">All Tags</option>
                            <option value="best_views">‚õ∞Ô∏è Best Views</option>
                            <option value="friend_rec">‚≠ê Friend Rec.</option>
                            <option value="teahouse">‚òï Teahouse</option>
                            <option value="larch_highlight">üçÇ Larch Highlight</option>
                            <option value="favorite">üåü Must-Do/Favorite</option>
                        </select>
                    </div>
                </div>
                <div class="overflow-x-auto bg-white shadow rounded-lg">
                    <table class="min-w-full divide-y divide-slate-200">
                        <thead class="bg-slate-100">
                            <tr>
                                <th @click="sortHikes('name')" class="px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Hike Name <span class="sort-arrow" :class="{'active': hikeSort.column === 'name'}" x-text="hikeSort.column === 'name' ? (hikeSort.direction === 'asc' ? '‚ñ≤' : '‚ñº') : '‚Üï'"></span></th>
                                <th @click="sortHikes('difficulty')" class="px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider hidden sm:table-cell">Difficulty <span class="sort-arrow" :class="{'active': hikeSort.column === 'difficulty'}" x-text="hikeSort.column === 'difficulty' ? (hikeSort.direction === 'asc' ? '‚ñ≤' : '‚ñº') : '‚Üï'"></span></th>
                                <th @click="sortHikes('duration')" class="px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider hidden md:table-cell">Duration <span class="sort-arrow" :class="{'active': hikeSort.column === 'duration'}" x-text="hikeSort.column === 'duration' ? (hikeSort.direction === 'asc' ? '‚ñ≤' : '‚ñº') : '‚Üï'"></span></th>
                                <th @click="sortHikes('startingArea')" class="px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider hidden lg:table-cell">Starting Area <span class="sort-arrow" :class="{'active': hikeSort.column === 'startingArea'}" x-text="hikeSort.column === 'startingArea' ? (hikeSort.direction === 'asc' ? '‚ñ≤' : '‚ñº') : '‚Üï'"></span></th>
                                <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Summary & Tags</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            <template x-for="hike in displayedHikes" :key="hike.name">
                                <tr class="bg-sky-50 hover:bg-sky-100">
                                    <td class="px-3 py-3 whitespace-nowrap text-sm font-medium text-teal-700" x-text="hike.name"></td>
                                    <td class="px-3 py-3 whitespace-nowrap text-sm text-slate-600 hidden sm:table-cell" x-text="hike.difficulty"></td>
                                    <td class="px-3 py-3 whitespace-nowrap text-sm text-slate-600 hidden md:table-cell" x-text="hike.duration"></td>
                                    <td class="px-3 py-3 whitespace-nowrap text-sm text-slate-600 hidden lg:table-cell" x-text="hike.startingArea"></td>
                                    <td class="px-3 py-3 text-sm text-slate-600">
                                        <p x-text="hike.summary" class="mb-1"></p>
                                        <template x-for="tag in hike.tags" :key="tag">
                                            <span class="tag-emoji" :title="getTagTitle(tag)" x-text="getTagEmoji(tag)"></span>
                                        </template>
                                        <p class="text-xs italic text-amber-700 mt-1" x-show="hike.specialNotes" x-text="hike.specialNotes"></p>
                                    </td>
                                </tr>
                            </template>
                            <template x-if="displayedHikes.length === 0">
                                <tr>
                                    <td colspan="5" class="text-center py-4 text-slate-500">No hikes match your current filters.</td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <div x-show="activeActivityTab === 'dining'">
                 <div class="mb-4 flex flex-wrap gap-2 items-center">
                    <label for="diningLocationFilter" class="text-sm font-medium text-slate-700">Filter by Location:</label>
                    <select id="diningLocationFilter" x-model="diningFilters.location" @change="filterDining()" class="block w-full sm:w-auto px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm">
                        <option value="all">All Locations</option>
                        <option value="Canmore">Canmore</option>
                        <option value="Banff">Banff</option>
                        <option value="Lake Louise">Lake Louise</option>
                    </select>
                    <label for="diningPriceFilter" class="text-sm font-medium text-slate-700 ml-0 sm:ml-4">Price Range:</label>
                    <select id="diningPriceFilter" x-model="diningFilters.price" @change="filterDining()" class="block w-full sm:w-auto px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm">
                        <option value="all">All Prices</option>
                        <option value="$">$ (Budget)</option>
                        <option value="$$">$$ (Mid-Range)</option>
                        <option value="$$$">$$$ (Upscale)</option>
                        <option value="$$$$">$$$$ (Fine Dining)</option>
                    </select>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                    <template x-for="restaurant in filteredDining" :key="restaurant.name">
                        <div class="card p-4 sm:p-5">
                            <div class="flex-grow">
                                <h3 class="text-lg font-semibold text-teal-600 mb-1" x-text="restaurant.name"></h3>
                                <p class="text-sm text-slate-500"><strong class="font-medium">Location:</strong> <span x-text="restaurant.location"></span></p>
                                <p class="text-sm text-slate-500"><strong class="font-medium">Cuisine:</strong> <span x-text="restaurant.cuisine"></span></p>
                                <p class="text-sm text-slate-500"><strong class="font-medium">Price:</strong> <span x-text="restaurant.price"></span></p>
                                <p class="text-sm text-slate-600 mt-2" x-text="restaurant.summary"></p>
                            </div>
                        </div>
                    </template>
                    <template x-if="filteredDining.length === 0">
                        <p class="text-slate-500 md:col-span-2 lg:col-span-3">No dining options match your current filters.</p>
                    </template>
                </div>
            </div>
             <div x-show="activeActivityTab === 'other'">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                    <template x-for="activity in otherActivities" :key="activity.name">
                         <div class="card p-4 sm:p-5">
                            <div class="flex-grow">
                                <h3 class="text-lg font-semibold text-teal-600 mb-1" x-text="activity.name"></h3>
                                <p class="text-sm text-slate-500 mb-2" x-text="activity.category"></p>
                                <p class="text-sm text-slate-600" x-text="activity.summary"></p>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <section x-show="activeSection === 'bookings'" x-transition>
            <h2 class="text-2xl sm:text-3xl font-bold text-teal-700 mb-6 section-title">Booking Checklist</h2>
            <p class="mb-6 text-slate-600">Stay on top of your planning with this essential booking checklist. Refer to these key items and deadlines to ensure a smooth and stress-free preparation for your adventure. Securing accommodations, transportation, and certain activities in advance is crucial for a September trip to Banff.</p>
            <div class="space-y-4">
                <template x-for="(item, index) in bookings" :key="index">
                    <div class="card p-4 sm:p-5">
                        <h3 class="text-lg font-semibold text-teal-600 mb-1" x-text="item.item"></h3>
                        <p class="text-sm text-slate-500 mb-1"><strong class="font-medium">Recommended Window:</strong> <span x-text="item.window"></span></p>
                        <p class="text-sm text-slate-500"><strong class="font-medium">Priority:</strong> <span class="font-bold" :class="{'text-red-600': item.priority === 'Highest', 'text-amber-600': item.priority === 'High', 'text-green-600': item.priority === 'Medium'}" x-text="item.priority"></span></p>
                        <p class="mt-2 text-sm text-slate-600" x-html="item.notes"></p>
                    </div>
                </template>
            </div>
        </section>

        <section x-show="activeSection === 'essentials'" x-transition>
            <h2 class="text-2xl sm:text-3xl font-bold text-teal-700 mb-6 section-title">Travel Essentials</h2>
            <p class="mb-6 text-slate-600">Prepare for your trip with this essential information covering packing, weather expectations for September in Banff, and important safety considerations. Being well-prepared will help you make the most of your mountain adventure.</p>
            <div class="space-y-3">
                 <template x-for="(item, index) in essentials" :key="index">
                    <div class="card">
                        <button @click="toggleAccordion(index, 'essentials')" class="accordion-button w-full flex justify-between items-center p-4 sm:p-5 text-left text-lg font-semibold text-teal-700 hover:bg-slate-100 rounded-t-md">
                            <span x-text="item.title"></span>
                            <span class="transform transition-transform duration-300" :class="{'rotate-180': openAccordions.essentials === index}">‚ñº</span>
                        </button>
                        <div x-show="openAccordions.essentials === index" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform -translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform translate-y-0" x-transition:leave-end="opacity-0 transform -translate-y-2" class="p-4 sm:p-5 border-t border-slate-200 prose max-w-none text-slate-600" x-html="item.content">
                        </div>
                    </div>
                </template>
            </div>
        </section>
        
        <section x-show="activeSection === 'home' && false" x-transition> <h3 class="text-xl font-semibold text-teal-700 my-4">Activity Type Overview (Sample Chart)</h3>
            <div class="chart-container bg-white p-4 rounded-lg shadow">
                <canvas id="activityChart"></canvas>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 text-center p-4 mt-12">
        <p>&copy; 2025 Banff Adventure Planner. Happy Travels!</p>
    </footer>

    <script>
        const itineraryData = {
            dailyPlan: [
                { 
                    title: 'Day 1: Thursday, Sept 11th ‚Äì Arrival & Canmore Check-in', 
                    focus: 'Travel & Settling In',
                    schedule: [
                        { time: '6:00 PM', activityDisplay: '‚úàÔ∏è Land at Calgary (YYC)', details: '' },
                        { time: '6:30 PM - 7:00 PM', activityDisplay: 'üöó Pick up Rental Car', details: 'Proceed to rental agency.' },
                        { time: '7:00 PM - 8:30 PM', activityDisplay: 'üöó Drive to Canmore', details: 'Approx. 1.5-hour drive.' },
                        { time: '8:30 PM onwards', activityDisplay: 'üõå Check into Airbnb', details: '190 Kananaskis Way. Settle in.' },
                        { time: 'Evening', activityDisplay: 'üõí Grocery Stop (Optional)', details: 'Pick up breakfast items/snacks. Safeway & Save-On-Foods in Canmore are typically open until 10 PM or later.'},
                        { time: '9:00 PM onwards', activityDisplay: 'üçΩÔ∏è Dinner in Canmore', details: '<em>Suggestions:</em> Tank310, The Iron Goat, Rocky Mtn Flatbread. Casual & easy.' },
                    ]
                },
                { 
                    title: 'Day 2: Friday, Sept 12th ‚Äì Moraine Lake\'s Magic & Larch Valley',
                    focus: 'Epic Moraine Lake Hike, Scenic Drive',
                    shuttleStrategy: '[!] Book Moraine Lake - Morning (6:30 AM - 11:00 AM) shuttle via Parks Canada ASAP. Or secure a third-party shuttle for early access.',
                    schedule: [
                        { time: '5:30 AM - 6:00 AM', activityDisplay: 'üöó Canmore to Lake Louise Park & Ride', details: 'Approx. 1 hour. Aim to be early for your shuttle.'},
                        { time: '6:30 AM - 7:00 AM', activityDisplay: 'üöå Shuttle To Moraine Lake', details: 'Via pre-booked Parks Canada shuttle or third-party.'},
                        { time: '7:00 AM - 7:30 AM', activityDisplay: 'üì∏ Moraine Lake Rockpile', details: 'Classic sunrise/early light views.'},
                        { time: '7:30 AM - 1:30 PM', activityDisplay: '‚õ∞Ô∏è HIKE: Larch Valley & Sentinel Pass', details: '<em>Duration:</em> 4-6 hours. <em>Difficulty:</em> Hard. Stunning views, iconic larch hike. <br/><em>Packed Lunch on Trail</em>'},
                        { time: '1:30 PM - 2:30 PM', activityDisplay: 'üöå Shuttle: Moraine Lake to LL P&R / Car', details: 'Or Lake Connector to Lake Louise if adding that.'},
                        { time: '2:30 PM - 5:30 PM', activityDisplay: 'üöó DRIVE: Bow Valley Parkway (1A) to Banff', details: 'Scenic drive. Stops: Morant\'s Curve, Castle Mountain Viewpoint. Optional: Johnston Canyon (Lower Falls, 1-1.5 hours, can be crowded).'},
                        { time: '5:30 PM - 7:00 PM', activityDisplay: 'üõçÔ∏è EXPLORE: Banff Town', details: 'Stroll Banff Ave, browse shops.'},
                        { time: '7:00 PM onwards', activityDisplay: 'üçΩÔ∏è DINE: Dinner in Banff', details: '<em>Suggestions:</em> The Bison, Bear Street Tavern, Park Distillery. Optional: Banff Upper Hot Springs.'},
                        { time: 'Evening', activityDisplay: 'üöó DRIVE: Banff to Canmore', details: 'Approx. 20-25 mins.'},
                    ]
                },
                { 
                    title: 'Day 3: Saturday, Sept 13th ‚Äì Lake Louise Classics & Teahouse Trails',
                    focus: 'Iconic Lake Louise Hikes',
                    shuttleStrategy: '[!] Book Lake Louise - Morning (6:30 AM - 11:00 AM) shuttle via Parks Canada.',
                    schedule: [
                        { time: '6:00 AM - 6:30 AM', activityDisplay: 'üöó Canmore to Lake Louise Park & Ride', details: 'Approx. 1 hour.'},
                        { time: '7:00 AM - 7:30 AM', activityDisplay: 'üöå Shuttle to Lake Louise Lakeshore', details: 'Via pre-booked Parks Canada shuttle.'},
                        { time: '7:30 AM - 2:00 PM', activityDisplay: '‚õ∞Ô∏è HIKE: Choose ONE Lake Louise Classic', details: '<strong>Option 1: Plain of Six Glaciers</strong> (4-5.5 hrs, Mod). <br/><strong>Option 2: Lake Agnes & Beehives</strong> (Little: 3-4 hrs, Mod; Big: 4-6 hrs, Mod-Hard).<br/><strong>Option 3: Devil\'s Thumb</strong> (5-6.5 hrs, Hard/Scramble).<br/><em>Packed Lunch or Teahouse Stop (cash)</em> <br/><em>(Refer to Activities > Hikes for full details on these options)</em>'},
                        { time: '2:00 PM - 3:30 PM', activityDisplay: 'üõ∂ Optional: Canoeing on Lake Louise', details: '[!] Approx. $165/hr. Iconic romantic experience. Or relax by shoreline.'},
                        { time: '3:30 PM - 4:00 PM', activityDisplay: 'üöå Shuttle: Lake Louise Lakeshore to P&R', details: ''},
                        { time: '4:00 PM - 5:00 PM', activityDisplay: 'üöó DRIVE: Lake Louise to Canmore', details: ''},
                        { time: '5:00 PM onwards', activityDisplay: 'üõçÔ∏è EXPLORE: Canmore Town', details: 'Main Street, art galleries, Policeman\'s Creek Boardwalk.'},
                        { time: '7:00 PM onwards', activityDisplay: 'üçΩÔ∏è DINE: Dinner in Canmore', details: '<em>Suggestions:</em> Crazyweed Kitchen, Murrieta\'s, √§nk√¥r (fine dining). Optional: One Wellness Spa ([!] Pre-book).'},
                    ]
                },
                 { 
                    title: 'Day 4: Sunday, Sept 14th ‚Äì Icefields Parkway OR Canmore Peak',
                    focus: 'Scenic Drive OR Challenging Local Hike & Activity',
                    schedule: [
                        { time: 'Full Day', activityDisplay: 'üõ£Ô∏è OPTION A: Icefields Parkway Adventure', details: 'Start 7:30 AM. Stops: Bow Lake, Peyto Lake. Hike: Parker Ridge (2-3 hrs). Columbia Icefield. Scenic drive back.'},
                        { time: 'Full Day', activityDisplay: '‚õ∞Ô∏è OPTION B: Canmore Focus', details: 'Hike: Ha Ling Peak (3-5 hrs, Hard). Afternoon: Via Ferrata, Banff Gondola, or Fairmont Afternoon Tea. Farewell Romantic Dinner in Canmore or Banff.'},
                        { time: 'Evening (Option A)', activityDisplay: 'üçΩÔ∏è DINE: Dinner in Canmore', details: 'Casual and easy after a long day.'},
                    ]
                },
                {
                    title: 'Day 5: Monday, Sept 15th ‚Äì Flexible Exploration & Goodbyes',
                    focus: 'Relaxed exploration, souvenir shopping, catch anything missed.',
                    schedule: [
                        { time: 'Morning', activityDisplay: 'üèûÔ∏è EXPLORE: Choose Your Focus', details: 'Banff (Sulphur Mtn, Bow Falls, etc.) OR Canmore (Policeman\'s Creek, Galleries, etc.) OR Lake Minnewanka Loop.'},
                        { time: 'Lunch', activityDisplay: 'üçΩÔ∏è DINE: Casual Lunch', details: 'In Banff or Canmore.'},
                        { time: 'Afternoon', activityDisplay: 'üõçÔ∏è EXPLORE: Souvenir Shopping / ‚òï Caf√© Break', details: ''},
                        { time: 'Sunset', activityDisplay: 'üì∏ PHOTO: Vermilion Lakes at Sunset', details: '[!] Highly recommended for Mt. Rundle reflections. Near Banff.'},
                        { time: 'Evening', activityDisplay: 'üçΩÔ∏è DINE: Final Dinner', details: 'Revisit a favorite or try a new spot.'},
                    ]
                },
                {
                    title: 'Flexible Day / Rainy Day Options',
                    focus: 'Indoor activities, relaxation, and cultural exploration in Banff & Canmore.',
                    shuttleStrategy: null,
                    schedule: [
                        { time: 'Morning', activityDisplay: 'üèõÔ∏è Museum Hopping / Cultural Sites (Banff)', details: 'Choose one or two: Whyte Museum of the Canadian Rockies (Indigenous art exhibit), Cave and Basin NHS (birthplace of parks), Banff Park Museum.'},
                        { time: 'Alternatively (Canmore)', activityDisplay: 'üñºÔ∏è Canmore Exploration', details: 'Visit Canmore Museum and Geoscience Centre, browse local art galleries on Main Street.'},
                        { time: 'Lunch', activityDisplay: '‚òï Cozy Lunch', details: 'Select a warm caf√© or bistro in Banff or Canmore. <em>Suggestions:</em> Wild Flour Bakery (Banff), Beamers Coffee Bar (Canmore), Communitea Cafe (Canmore).'},
                        { time: 'Afternoon', activityDisplay: 'üíÜ‚Äç‚ôÄÔ∏è Relaxation / üõçÔ∏è Shopping / üö† Sheltered Views', details: '<strong>Option 1: Spa Day</strong> - One Wellness Spa in Canmore (massages, hydrotherapy - book ahead!).<br/><strong>Option 2: Shopping</strong> - Explore boutiques in Banff or Canmore.<br/><strong>Option 3: Banff Gondola</strong> - Ride up Sulphur Mountain; the summit complex has indoor exhibits and panoramic views from enclosed areas.'},
                        { time: 'Late Afternoon', activityDisplay: '‚ô®Ô∏è Banff Upper Hot Springs', details: 'A warm soak is great regardless of weather (unless lightning).'},
                        { time: 'Evening', activityDisplay: 'üé¨ Relaxed Evening', details: 'Enjoy a comfortable dinner. Consider a movie at Lux Cinema Banff or bowling at High Rollers.'}
                    ]
                },
                {
                    title: 'Day 6: Tuesday, Sept 16th ‚Äì Departure',
                    focus: 'Travel Home',
                    schedule: [
                        { time: '~4:30 AM', activityDisplay: 'üõå Wake up, Final Pack', details: ''},
                        { time: '~4:45 AM - 5:00 AM', activityDisplay: 'üöó Depart Canmore for Calgary Airport', details: 'Allow 1.5 hours.'},
                        { time: '~6:15 AM - 6:30 AM', activityDisplay: 'üöó Arrive YYC, Return Rental Car', details: ''},
                        { time: '7:15 AM', activityDisplay: '‚úàÔ∏è Flight Departs', details: ''},
                    ]
                }
            ],
            hikes: [
                { 
                    name: 'Larch Valley & Sentinel Pass', 
                    startingArea: 'Moraine Lake',
                    distance: '~11.6 km',
                    elevation: '~795m',
                    duration: '4-6 hours', 
                    difficulty: 'Hard', 
                    popularity: 'Extremely High',
                    tags: ['best_views', 'larch_highlight', 'favorite', 'friend_rec'],
                    specialNotes: 'Must-do for Larch Season. Shuttle essential. Bear area.',
                    summary: 'Iconic hike to golden larches & panoramic Ten Peaks views; Sentinel Pass adds challenge.',
                    details: '<strong>Location:</strong> Moraine Lake (Shuttle Required)<br/><strong>Distance:</strong> ~11.6 km (to Sentinel Pass) / ~9.5 km (Larch Valley only)<br/><strong>Elevation Gain:</strong> ~795m (Sentinel Pass) / ~535m (Larch Valley)<br/><strong>Estimated Time:</strong> 4-6 hours<br/><strong>Difficulty:</strong> Hard (Moderate to Larch Valley, becomes Harder to Sentinel Pass)<br/><strong>Experience:</strong> One of Banff\'s premier hikes, especially when the larch trees turn golden (typically mid-late Sept). Offers stunning views of the Ten Peaks. Sentinel Pass provides even more panoramic vistas. <br/><strong>Notes:</strong> Extremely popular, secure shuttle reservations far in advance or try the 48-hr window. Prime Grizzly habitat; carry bear spray and make noise. Group of 4+ often recommended by Parks Canada during peak bear season for Larch Valley.' 
                },
                { 
                    name: 'Plain of Six Glaciers Tea House Trail', 
                    startingArea: 'Lake Louise',
                    distance: '14.6 km',
                    elevation: '588m',
                    duration: '4-5.5 hours', 
                    difficulty: 'Moderate', 
                    popularity: 'Very High',
                    tags: ['best_views', 'teahouse', 'friend_rec', 'favorite'],
                    specialNotes: 'Historic teahouse (cash only!). Shuttle essential.',
                    summary: 'Classic Lake Louise hike to a historic teahouse with stunning glacier views.',
                    details: '<strong>Location:</strong> Lake Louise (Shuttle Required)<br/><strong>Distance:</strong> 14.6 km / 9.1 miles (roundtrip)<br/><strong>Elevation Gain:</strong> 588 m / 1,929 ft<br/><strong>Estimated Time:</strong> 4-5.5 hours<br/><strong>Difficulty:</strong> Moderate<br/><strong>Experience:</strong> A classic Lake Louise hike that takes you past the end of the lake, up a valley with stunning views of glaciers (Victoria, Lefroy, Aberdeen), towering cliffs, and a historic teahouse. Small larch grove near the teahouse. Potential to see/hear avalanches from a safe distance.<br/><strong>Notes:</strong> Teahouse is cash only. Popular trail, can be busy. Shuttle to Lake Louise highly recommended.' 
                },
                { 
                    name: 'Lake Agnes Tea House & Little Beehive', 
                    startingArea: 'Lake Louise',
                    distance: '~8.8 km (to Little Beehive)',
                    elevation: '~490m (to Little Beehive)',
                    duration: '3-4 hours', 
                    difficulty: 'Moderate', 
                    popularity: 'Very High',
                    tags: ['best_views', 'teahouse', 'friend_rec', 'larch_highlight'],
                    specialNotes: 'Popular teahouse (cash only!). Great views from Little Beehive. Shuttle essential.',
                    summary: 'Charming teahouse visit combined with rewarding views over Lake Louise from Little Beehive.',
                    details: '<strong>Location:</strong> Lake Louise (Shuttle Required)<br/><strong>Distance:</strong> ~8.8 km / 5.5 miles (roundtrip including Little Beehive)<br/><strong>Elevation Gain:</strong> ~490 m / 1,607 ft<br/><strong>Estimated Time:</strong> 3-4 hours<br/><strong>Difficulty:</strong> Moderate<br/><strong>Experience:</strong> A beautiful, forested trail leading to Mirror Lake and then up to the charming Lake Agnes Teahouse. Continue a short distance further to the Little Beehive for excellent views over Lake Louise and the Bow Valley. Larch trees are present in the area.<br/><strong>Notes:</strong> Lake Agnes Teahouse is extremely popular; arrive early or expect a wait (cash only). Shuttle to Lake Louise highly recommended.' 
                },
                { 
                    name: 'Ha Ling Peak', 
                    startingArea: 'Near Canmore',
                    distance: '~7.8 km',
                    elevation: '~760m',
                    duration: '3-5 hours', 
                    difficulty: 'Hard', 
                    popularity: 'High',
                    tags: ['best_views', 'favorite'],
                    specialNotes: 'Panoramic views over Canmore. Kananaskis Pass needed for parking.',
                    summary: 'Challenging Canmore peak with epic 360-degree views of the Bow Valley.',
                    details: '<strong>Location:</strong> Above Canmore (Goat Creek Day Use parking)<br/><strong>Distance:</strong> ~7.8 km / 4.8 miles (roundtrip)<br/><strong>Elevation Gain:</strong> ~760 m / 2,493 ft<br/><strong>Estimated Time:</strong> 3-5 hours<br/><strong>Difficulty:</strong> Hard (some sources say Difficult due to steepness and scree/scramble at the top)<br/><strong>Experience:</strong> A challenging but highly rewarding hike with epic 360-degree views over Canmore, the Bow Valley, and surrounding peaks. The trail has been significantly upgraded to the saddle, with the final push to the true summit involving some scrambling.<br/><strong>Notes:</strong> Kananaskis Conservation Pass required for parking. Very popular, start early.' 
                },
                 { 
                    name: 'Parker Ridge Trail', 
                    startingArea: 'Icefields Parkway',
                    distance: '5.4 km',
                    elevation: '269m',
                    duration: '2-3 hours', 
                    difficulty: 'Easy-Moderate', 
                    popularity: 'High',
                    tags: ['best_views'],
                    specialNotes: 'Saskatchewan Glacier views. Rental car needed.',
                    summary: 'High reward-for-effort hike on Icefields Parkway with Saskatchewan Glacier views.',
                    details: '<strong>Location:</strong> Icefields Parkway (approx. 118 km north of Lake Louise)<br/><strong>Distance:</strong> 5.4 km / 3.4 miles (roundtrip)<br/><strong>Elevation Gain:</strong> 269 m / 882 ft<br/><strong>Estimated Time:</strong> 2-3 hours<br/><strong>Difficulty:</strong> Easy to Moderate<br/><strong>Experience:</strong> One of the best reward-for-effort hikes on the Icefields Parkway. A steady climb leads to an exposed ridge with breathtaking, panoramic views of the massive Saskatchewan Glacier.<br/><strong>Notes:</strong> Often windy on the ridge. Good for acclimatization. Can have snow patches early/late season. Rental car essential.' 
                },
                { 
                    name: 'Johnston Canyon (to Upper Falls)', 
                    startingArea: 'Bow Valley Parkway',
                    distance: '5 km (to Upper Falls)',
                    elevation: '~260m (to Upper Falls)',
                    duration: '1.5-2.5 hours', 
                    difficulty: 'Easy-Moderate', 
                    popularity: 'Extremely High',
                    tags: [],
                    specialNotes: 'Catwalks, waterfalls. Parking very challenging. Check BVP access.',
                    summary: 'Popular canyon walk on catwalks to impressive Lower and Upper Falls.',
                    details: '<strong>Location:</strong> Bow Valley Parkway (Highway 1A)<br/><strong>Distance:</strong> 2.4 km / 1.5 miles (to Lower Falls RT); 5 km / 3.1 miles (to Upper Falls RT)<br/><strong>Elevation Gain:</strong> ~50m (Lower); ~260m (Upper)<br/><strong>Estimated Time:</strong> 1-1.5 hrs (Lower); 1.5-2.5 hrs (Upper)<br/><strong>Difficulty:</strong> Easy (Lower); Easy-Moderate (Upper)<br/><strong>Experience:</strong> A very popular walk along catwalks built into canyon walls, leading to stunning waterfalls. The Lower Falls are impressive, and the Upper Falls are even more powerful. You can continue to the Ink Pots (adds ~6km RT, 2-3 hrs).<br/><strong>Notes:</strong> Extremely crowded, especially mid-day. Parking is very limited; consider going very early or late, or using Roam transit if feasible. Check for any seasonal Bow Valley Parkway access restrictions.' 
                },
                { 
                    name: 'Grassi Lakes Trail', 
                    startingArea: 'Near Canmore',
                    distance: '~3.8-4.3 km',
                    elevation: '~150-250m',
                    duration: '1.5-2.5 hours', 
                    difficulty: 'Easy-Moderate', 
                    popularity: 'High',
                    tags: [],
                    specialNotes: 'Emerald ponds, views of Ha Ling. Kananaskis Pass needed.',
                    summary: 'Family-friendly hike to two beautiful emerald-green ponds near Canmore.',
                    details: '<strong>Location:</strong> Near Canmore (above Canmore Nordic Centre)<br/><strong>Distance:</strong> ~3.8-4.3 km / 2.4-2.7 miles (roundtrip, depending on route)<br/><strong>Elevation Gain:</strong> ~150-250 m / 490-820 ft<br/><strong>Estimated Time:</strong> 1.5-2.5 hours<br/><strong>Difficulty:</strong> Easy to Moderate (Two trails: an "easier" gravel road and a slightly more "difficult" forested trail with viewpoints and a waterfall).<br/><strong>Experience:</strong> Leads to two stunningly clear, emerald-green ponds. Views of Canmore and Ha Ling Peak from parts of the trail.<br/><strong>Notes:</strong> Very popular, especially with families. Kananaskis Conservation Pass required for parking.' 
                },
                { 
                    name: 'Tunnel Mountain Summit', 
                    startingArea: 'Banff Town',
                    distance: '~4.3-4.8 km',
                    elevation: '~260-266m',
                    duration: '1.5-2 hours', 
                    difficulty: 'Moderate', 
                    popularity: 'High',
                    tags: ['best_views'],
                    specialNotes: 'Great views over Banff town and Bow Valley. Accessible from town.',
                    summary: 'Accessible hike from Banff town offering great views over the town and valley.',
                    details: '<strong>Location:</strong> Banff Town (trailheads on St. Julien Road or Tunnel Mountain Drive)<br/><strong>Distance:</strong> ~4.3-4.8 km / 2.7-3.0 miles (roundtrip)<br/><strong>Elevation Gain:</strong> ~260-266 m / 850-870 ft<br/><strong>Estimated Time:</strong> 1.5-2 hours<br/><strong>Difficulty:</strong> Moderate (steady switchbacks, well-maintained trail)<br/><strong>Experience:</strong> Highly accessible hike offering great views over the Town of Banff, Bow Valley, Fairmont Banff Springs Hotel, and Mount Rundle. Good for a morning or late afternoon hike.<br/><strong>Notes:</strong> Popular year-round.' 
                },
                { 
                    name: 'Ptarmigan Cirque', 
                    startingArea: 'Kananaskis (Highwood Pass)',
                    distance: '4.0-4.5 km loop',
                    elevation: '~210-221m',
                    duration: '1.5-2 hours', 
                    difficulty: 'Easy-Moderate', 
                    popularity: 'Moderate',
                    tags: ['larch_highlight'],
                    specialNotes: 'Potential Larch views. Starts at Canada\'s highest paved pass. Kananaskis Pass needed. Check road open.',
                    summary: 'High alpine cirque hike in Kananaskis, great for wildflowers or early Larch views.',
                    details: '<strong>Location:</strong> Kananaskis Country (Highwood Pass - highest paved pass in Canada)<br/><strong>Distance:</strong> ~4.0-4.5 km / 2.5-2.8 miles (loop)<br/><strong>Elevation Gain:</strong> ~210-221 m / 690-725 ft<br/><strong>Estimated Time:</strong> 1.5-2 hours<br/><strong>Difficulty:</strong> Easy to Moderate<br/><strong>Experience:</strong> A fantastic short hike into a stunning alpine cirque. Excellent for wildflowers in summer and can offer beautiful Larch views in September. Great for families and those wanting accessible alpine scenery.<br/><strong>Notes:</strong> Kananaskis Conservation Pass required. Highwood Pass (Hwy 40) is subject to seasonal closure (typically Dec 1 - June 14); should be open in September, but always good to verify.' 
                },
                { 
                    name: 'Devil\'s Thumb via Lake Agnes', 
                    startingArea: 'Lake Louise',
                    distance: '~11.9-13 km',
                    elevation: '883m',
                    duration: '5-6.5 hours', 
                    difficulty: 'Difficult', 
                    popularity: 'Moderate',
                    tags: ['best_views', 'friend_rec', 'teahouse'],
                    specialNotes: 'Challenging scramble with exposure. Unparalleled views. Shuttle essential.',
                    summary: 'Difficult scramble past Lake Agnes for unparalleled 360¬∞ views of Lake Louise & Lake Agnes.',
                    details: '<strong>Location:</strong> Lake Louise (Shuttle Required)<br/><strong>Distance:</strong> ~11.9-13 km / 7.4-8.1 miles (roundtrip, often part of a loop with Beehives/Lake Agnes)<br/><strong>Elevation Gain:</strong> 883 m / 2,897 ft<br/><strong>Estimated Time:</strong> 5-6.5 hours<br/><strong>Difficulty:</strong> Difficult (Challenging Scramble)<br/><strong>Experience:</strong> This hike takes you beyond Lake Agnes and the Beehives to a dramatic viewpoint. It involves significant steep sections, loose scree, and considerable scrambling with exposure. The reward is unparalleled 360-degree views of Lake Louise, Lake Agnes, Mount Fairview, and the surrounding glaciers.<br/><strong>Notes:</strong> This is for experienced hikers comfortable with heights, exposure, and route-finding on unofficial trails. Shuttle to Lake Louise highly recommended.' 
                },
                {
                    name: 'Mount Jimmy Simpson',
                    startingArea: 'Icefields Parkway (Bow Lake)',
                    distance: '~16.2 km',
                    elevation: '~1125m',
                    duration: '5-9 hours',
                    difficulty: 'Hard',
                    popularity: 'Low-Moderate',
                    tags: ['best_views', 'friend_rec'],
                    specialNotes: 'Challenging scramble, route-finding. Remote feel. Rental car essential.',
                    summary: 'Challenging alpine scramble with incredible panoramic views of Bow Lake & Wapta Icefield.',
                    details: '<strong>Location:</strong> Icefields Parkway (near Num-Ti-Jah Lodge, Bow Lake)<br/><strong>Distance:</strong> ~16.2 km / 10.1 miles (roundtrip)<br/><strong>Elevation Gain:</strong> ~1125 m / 3,690 ft<br/><strong>Estimated Time:</strong> 5-9 hours<br/><strong>Difficulty:</strong> Hard (Scramble)<br/><strong>Experience:</strong> A challenging ascent offering incredible panoramic views of Bow Lake, Crowfoot Mountain, Mount Thompson, Portal Peak, Mount Balfour, and the Wapta Icefield. Involves off-trail travel, route-finding, scree slopes, and some sections of easy to moderate scrambling.<br/><strong>Notes:</strong> For experienced hikers comfortable with route-finding and scrambling in a remote alpine environment. Rental car essential. Start very early.'
                },
                {
                    name: 'The Grand Tour Circuit (LL Teahouses & Big Beehive)',
                    startingArea: 'Lake Louise',
                    distance: '~19-20+ km',
                    elevation: '~1000+m',
                    duration: '7-9+ hours',
                    difficulty: 'Difficult',
                    popularity: 'Moderate (as full circuit)',
                    tags: ['best_views', 'teahouse', 'friend_rec', 'favorite', 'larch_highlight'],
                    specialNotes: 'Very long, strenuous day. Hits all key Lake Louise alpine spots. Shuttle essential.',
                    summary: 'Ultimate Lake Louise day hike connecting both teahouses, Beehives, and glacier views.',
                    details: '<strong>Location:</strong> Lake Louise (Shuttle Required)<br/><strong>Distance:</strong> ~19-20+ km / 11.8-12.4+ miles (loop)<br/><strong>Elevation Gain:</strong> ~1000+ m / 3,280+ ft<br/><strong>Estimated Time:</strong> 7-9+ hours<br/><strong>Difficulty:</strong> Difficult (due to length and sustained elevation gain)<br/><strong>Experience:</strong> Often called the "Tea House Challenge" or "Lake Louise Grand Tour." This epic loop connects Lake Agnes Teahouse, Little Beehive, Big Beehive, the Highline Trail (check conditions), and the Plain of Six Glaciers Teahouse, returning via the Lake Louise shoreline. It offers a comprehensive experience of the Lake Louise alpine environment, with varied views, two historic teahouses, and significant larch presence (Big Beehive, Plain of Six area).<br/><strong>Notes:</strong> Requires excellent fitness and an early start. Bring plenty of food, water, and cash for the teahouses. Shuttle to Lake Louise highly recommended.'
                }
            ],
            dining: [
                { name: 'The Bison Restaurant & Patio', location: 'Banff', cuisine: 'Regional Canadian', price: '$$$$', summary: 'Focuses on regional, seasonal Canadian cuisine with bison specialties and mountain views.', details: 'Focuses on regional, seasonal Canadian cuisine, known for bison. Lively atmosphere, mountain views. Reservations recommended.' },
                { name: 'Bear Street Tavern', location: 'Banff', cuisine: 'Pizza', price: '$$', summary: 'Famous for "Banff\'s best pizza" and craft beers in a casual, lively setting.', details: 'Famous for "Banff\'s best pizza" and craft beers. Casual, lively, dog-friendly patio. Reservations highly recommended.' },
                { name: '√§nkr', location: 'Canmore', cuisine: 'Contemporary Canadian', price: '$$$$', summary: 'Farm-to-table fine dining with tasting menus and a sophisticated atmosphere.', details: 'Farm-to-table fine dining with tasting menus. Highly praised. Reservations essential.' },
                { name: 'Tank310 (Grizzly Paw)', location: 'Canmore', cuisine: 'Pub Fare', price: '$$', summary: 'Brewery restaurant offering pub food with great mountain views and craft beers.', details: 'Located at the brewery, offering pub food with great mountain views and craft beers.' },
                { name: 'Sky Bistro', location: 'Banff (Gondola Summit)', cuisine: 'Contemporary Canadian', price: '$$$$', summary: 'Fine dining at the Banff Gondola summit with stunning mountain vistas.', details: 'Fine dining with stunning mountain vistas. Gondola admission is separate. Reservations essential (up to 90 days via OpenTable).' },
                { name: 'Crazyweed Kitchen', location: 'Canmore', cuisine: 'Global, International', price: '$$$', summary: 'Global comfort food in a "casual elegant" setting with a good wine selection.', details: 'Serves global comfort food in a "casual elegant" setting. Good wine selection. Reservations recommended.'},
                { name: 'The Iron Goat Pub & Grill', location: 'Canmore', cuisine: 'Pub Fare', price: '$$', summary: 'Pub with soaring windows, fireplace, and patio; known for unique pub dishes and views.', details: 'Features soaring windows, a large fireplace, and a great patio. Known for dishes like chipotle mango duck wings. Good views.' },
                { name: 'Rocky Mountain Flatbread Co.', location: 'Canmore', cuisine: 'Pizza', price: '$$', summary: 'Wood-fired pizzas using local and organic ingredients in a family-friendly atmosphere.', details: 'Wood-fired pizzas with a focus on local and organic ingredients. Family-friendly, lively atmosphere.' },
                { name: 'Juniper Bistro', location: 'Banff', cuisine: 'Canadian, Plant-Rich', price: '$$$', summary: 'Regionally sourced breakfast and plant-rich dishes with stunning patio views.', details: 'Located at The Juniper Hotel. Known for regionally sourced breakfast and plant-rich dishes with stunning views from its sun-drenched patio.' },
                { name: 'Three Bears Brewery & Restaurant', location: 'Banff', cuisine: 'Brewpub, Chef-Inspired', price: '$$', summary: 'Craft brewery with forest-themed interior, retractable roof, and food designed to pair with beers.', details: 'Craft brewery with a unique forest-themed interior, retractable roof, and beer garden. Food designed to pair with their beers. Happy hour with live music.' },
                { name: 'LUPO Italian Ristorante & Patio', location: 'Banff', cuisine: 'Italian (Fresh Pasta)', price: '$$$$', summary: 'Award-winning Italian restaurant known for fresh, house-made pasta and mountain views.', details: 'Ranked in Canada\'s Top 10 New Restaurants 2023. Fresh, house-made pasta. Mountain views from window seats, sun-soaked patio.' },
                { name: 'The Stirling Dining Room and Lounge', location: 'Canmore', cuisine: 'Canadian', price: '$$$$', summary: 'Casual fine dining at The Malcolm Hotel featuring local Alberta ingredients and creek views.', details: 'Located at The Malcolm Hotel. Casual fine dining featuring local Alberta ingredients, craft beers, and a good wine list, with views of Policeman\'s Creek.' }
            ],
            otherActivities: [
                { name: 'Canoeing on Lake Louise', category: 'Water Activity', summary: 'Iconic experience: rent a canoe on the turquoise waters of Lake Louise.', details: 'Rent canoes from Fairmont Chateau Lake Louise Boathouse. Approx. $165/hr for day visitors. First-come, first-served. Iconic experience.'},
                { name: 'Banff Gondola (Sulphur Mountain)', category: 'Sightseeing', summary: 'Ride to Sulphur Mountain summit for panoramic views, boardwalks, and dining.', details: '8-minute ride to summit with panoramic views, boardwalk, interpretive centre, dining. Book tickets in advance.'},
                { name: 'Banff Upper Hot Springs', category: 'Relaxation', summary: 'Soak in natural mineral hot springs with mountain views; a classic Banff experience.', details: 'Soak in natural mineral hot springs. First-come, first-served. Approx. $17.50/adult.'},
                { name: 'Icefields Parkway Scenic Drive', category: 'Scenic Drive', summary: 'World-renowned drive with numerous glacier viewpoints, lakes, and short hikes.', details: 'World-renowned drive with numerous viewpoints (Bow Lake, Peyto Lake, etc.) and short hikes (Parker Ridge, Mistaya Canyon). Pack lunch. Rental car essential.'},
                { name: 'Via Ferrata at Mt. Norquay', category: 'Adventure', summary: 'Assisted climbing on fixed cables and rungs for thrilling mountain views.', details: 'Assisted climbing experience on fixed cables and rungs with a guide. Various routes. Book in advance.'},
                { name: 'One Wellness Spa (Canmore)', category: 'Relaxation', summary: 'Offers massages and hydrotherapy (Recovery Zone) very close to your Airbnb.', details: 'Offers massages and hydrotherapy (Recovery Zone). Very close to 190 Kananaskis Way. Book treatments in advance.'}
            ],
            bookings: [
                 { item: 'Rental Car', window: 'ASAP (Now - June 2025)', priority: 'Highest', notes: 'Essential for this itinerary. Early booking secures better rates and availability, especially for September.' },
                { item: 'Parks Canada Shuttles (Lake Louise & Moraine Lake)', window: 'April 16, 2025, 8:00 AM MDT (Initial Release); then 2 days prior at 8:00 AM MDT (Rolling Release)', priority: 'Highest', notes: 'Crucial for access. 40% of seats released April 16; 60% released 48 hours prior. Book via Parks Canada Reservation Service. These sell out extremely fast.' },
                { item: 'Third-Party Shuttles (Backup for LL & ML)', window: 'June - August 2025 (or earlier if Parks Canada shuttle is missed)', priority: 'High', notes: 'Options: Canmore Travel, Moraine Lake Bus Company, etc. More expensive but offer alternatives. Check cancellation policies.' },
                { item: 'Key Dining Reservations (Fine Dining/Unique Views)', window: 'June - July 2025 (60-90 days out)', priority: 'High', notes: 'e.g., Sky Bistro, √§nk√¥r, The Bison. Book via OpenTable or direct. Fairmont 360 Dome: Inquire ASAP.' },
                { item: 'Special Activities (Via Ferrata, Gondola, Spa)', window: 'July - August 2025 (1-2 months out)', priority: 'Medium', notes: 'Book these once core hike/lake days are solidifying.' },
            ],
            essentials: [
                { 
                    title: 'Weather & Packing for September', 
                    content: 
                        <p>Mid-September in Banff offers a mix of seasons. Expect average daytime highs around 16-17¬∞C (61-63¬∞F) and nighttime lows near 3-4¬∞C (37-39¬∞F). Warm sunny days up to 25¬∞C (77¬∞F) are possible, but so are crisp mornings and early snow, especially at higher elevations.</p>
                        <strong class="font-semibold block mt-3 mb-1">Key Packing Items:</strong>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Layered Clothing: Base layers (wool/synthetic), fleece, waterproof/windproof outer shell.</li>
                            <li>Waterproof hiking boots (broken-in).</li>
                            <li>Warm hat, gloves, warm socks.</li>
                            <li>Sunscreen, sunglasses, lip balm.</li>
                            <li>Daypack, reusable water bottle.</li>
                            <li>Bear spray (purchase/rent in Canada).</li>
                            <li>Camera, portable charger.</li>
                            <li>Swimsuit (for hot springs/spa).</li>
                        </ul>
                     
                },
                { 
                    title: 'Wildlife Safety', 
                    content: 
                        <p>September is an active time for wildlife. Elk are in their rutting season and can be aggressive. Bears are actively foraging before hibernation.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong class="font-semibold">Elk:</strong> Maintain at least 30 meters (3 bus lengths) distance. Never get between a bull and his cows.</li>
                            <li><strong class="font-semibold">Bears:</strong> Carry bear spray AND KNOW HOW TO USE IT. Keep it accessible. Make noise while hiking. Travel in groups if possible.</li>
                            <li>Never feed wildlife.</li>
                            <li>Keep pets leashed at all times.</li>
                            <li>Report sightings of bears, cougars, wolves to Parks Canada (403-762-1470) when safe.</li>
                        </ul>
                     
                },
                { 
                    title: 'Park Passes & Access', 
                    content: 
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong class="font-semibold">Banff National Park Pass:</strong> Required for entry. Purchase daily or a Discovery Pass (annual) online or at park gates.</li>
                            <li><strong class="font-semibold">Kananaskis Conservation Pass:</strong> Required for parking in Kananaskis Country (e.g., Ha Ling Peak). Purchase online.</li>
                            <li><strong class="font-semibold">Shuttle Reservations:</strong> Absolutely essential for Lake Louise & Moraine Lake. Book Parks Canada shuttles the moment they open (April 16, 2025, 8 AM MDT).</li>
                            <li><strong class="font-semibold">Parking:</strong> Very limited at popular spots. Arrive early or use shuttles/public transit. Downtown Banff has paid parking.</li>
                        </ul>
                    
                }
            ]
        };

        function appData() {
            return {
                activeSection: 'home',
                mobileMenuOpen: false,
                openAccordions: { dailyPlan: null, essentials: null },
                dailyPlan: itineraryData.dailyPlan,
                allHikes: itineraryData.hikes,
                displayedHikes: [], 
                hikeFilters: { difficulty: 'all', tag: 'all' },
                hikeSort: { column: 'name', direction: 'asc' },
                allDining: itineraryData.dining,
                filteredDining: itineraryData.dining,
                diningFilters: { location: 'all', price: 'all'},
                otherActivities: itineraryData.otherActivities,
                bookings: itineraryData.bookings,
                essentials: itineraryData.essentials,
                activeActivityTab: 'hikes',

                toggleAccordion(index, type) {
                    if (this.openAccordions[type] === index) {
                        this.openAccordions[type] = null;
                    } else {
                        this.openAccordions[type] = index;
                    }
                },
                
                applyHikeFiltersAndSort() {
                    let tempHikes = this.allHikes;

                    if (this.hikeFilters.difficulty !== 'all') {
                        tempHikes = tempHikes.filter(hike => hike.difficulty === this.hikeFilters.difficulty);
                    }

                    if (this.hikeFilters.tag !== 'all') {
                        tempHikes = tempHikes.filter(hike => hike.tags && hike.tags.includes(this.hikeFilters.tag));
                    }
                    
                    tempHikes.sort((a, b) => {
                        let valA = a[this.hikeSort.column];
                        let valB = b[this.hikeSort.column];
                        
                        let comparison = 0;
                        if (this.hikeSort.column === 'duration') {
                            const parseDuration = (durationStr) => { 
                                const parts = durationStr.split('-').map(s => parseFloat(s.trim()));
                                return parts[0]; 
                            };
                            valA = parseDuration(valA);
                            valB = parseDuration(valB);
                        } else if (this.hikeSort.column === 'distance' || this.hikeSort.column === 'elevation') {
                             const parseMetric = (metricStr) => { 
                                return parseFloat(metricStr.replace(/[~km\s]/g, ''));
                            };
                            valA = parseMetric(valA);
                            valB = parseMetric(valB);
                        }

                        if (valA > valB) {
                            comparison = 1;
                        } else if (valA < valB) {
                            comparison = -1;
                        }
                        return this.hikeSort.direction === 'asc' ? comparison : comparison * -1;
                    });
                    
                    this.displayedHikes = tempHikes;
                },

                sortHikes(column) {
                    if (this.hikeSort.column === column) {
                        this.hikeSort.direction = this.hikeSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        this.hikeSort.column = column;
                        this.hikeSort.direction = 'asc';
                    }
                    this.applyHikeFiltersAndSort();
                },

                getTagEmoji(tag) {
                    const emojis = {
                        best_views: '‚õ∞Ô∏è', 
                        friend_rec: '‚≠ê', 
                        teahouse: '‚òï',   
                        larch_highlight: 'üçÇ', 
                        favorite: 'üåü'    
                    };
                    return emojis[tag] || '';
                },
                getTagTitle(tag) {
                    const titles = {
                        best_views: 'Best Views',
                        friend_rec: 'Friend Recommended',
                        teahouse: 'Teahouse Access',
                        larch_highlight: 'Larch Season Highlight',
                        favorite: 'Must-Do / Favorite'
                    };
                    return titles[tag] || tag;
                },

                filterDining() {
                    this.filteredDining = this.allDining.filter(d => {
                        const locationMatch = this.diningFilters.location === 'all' || d.location === this.diningFilters.location;
                        const priceMatch = this.diningFilters.price === 'all' || d.price === this.diningFilters.price;
                        return locationMatch && priceMatch;
                    });
                },
                // Modal functionality removed
                // openModal(title, content) {
                //     this.modalTitle = title;
                //     this.modalContent = content;
                //     this.modalOpen = true;
                // },
                // getHikeDetails(hikeName) {
                //     const hike = this.allHikes.find(h => h.name === hikeName);
                //     return hike ? hike.details : 'Details not found for this hike.';
                // },
                init() {
                    this.applyHikeFiltersAndSort(); 
                    this.filteredDining = this.allDining; 
                }
            };
        }
    </script>
</body>
</html>
